#!/usr/bin/env bash

set -e

function speak(){
  echo "========== $(date -u '+%Y-%m-%d_%H:%M:%S') $1 =========="
}

speak "Starting..."

speak "Install Ansible Dependency Packages..."

sudo yum install -y python python-setuptools gcc python-devel libffi-devel openssl-devel

speak "Install Ansible..."

sudo easy_install -U setuptools

sudo easy_install pip ansible

speak "Downloading playbook..."

curl -fsSL "https://raw.githubusercontent.com/IMOKURI/dotfiles/master/setup.yaml" -o ~/.setup.yaml

speak "Run Ansible Playbook..."

ansible-playbook ~/.setup.yaml --tags "initialize,deploy"

speak "Finished!"
